(()=>{(()=>{const i=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(i&&(i.saveData||/2g|3g|slow/.test(i.effectiveType||"")))return;const c=new IntersectionObserver(a=>{a.forEach(d=>{if(d.isIntersecting){const t=d.target;if(t.dataset.videoLoaded)return;const r=t.querySelector("img");if(!r)return;const l=t.getAttribute("href");if(!l)return;let s=l.replace(/\\/g,"/").replace(/index\.html.*$/,"");s.endsWith("/")||(s+="/");const u=s+"video.mp4",e=document.createElement("video");e.src=u,e.muted=!0,e.loop=!0,e.autoplay=!0,e.playsInline=!0,e.poster=r.getAttribute("src")||r.getAttribute("data-src"),e.style.width="100%",e.style.borderRadius=getComputedStyle(r).borderRadius,e.style.display="none";const p=r.style.aspectRatio||getComputedStyle(r).aspectRatio;p&&(e.style.aspectRatio=p);const m=()=>{const o=t.parentElement&&t.parentElement.classList.contains("img-wrapper")?t.parentElement:null;if(o){const n=o.querySelector(".img-loader");n&&n.remove(),o.classList.add("loaded")}r.replaceWith(e),e.style.display="block"};e.addEventListener("canplaythrough",m,{once:!0}),e.addEventListener("error",()=>{e.remove();const o=t.parentElement&&t.parentElement.classList.contains("img-wrapper")?t.parentElement:null;if(o){const n=o.querySelector(".img-loader");n&&n.remove(),o.classList.add("loaded")}},{once:!0}),r.after(e),t.dataset.videoLoaded="true",c.unobserve(t)}})},{rootMargin:"100px 0px",threshold:.01});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".project-item[data-video]").forEach(a=>{c.observe(a)})})})();})();
