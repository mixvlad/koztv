(()=>{(()=>{function o(t){const r=t.tagName==="PICTURE"?t.querySelector("img"):t;if(!r||t.parentElement&&t.parentElement.classList.contains("img-wrapper"))return;const e=document.createElement("span");e.className="img-wrapper",t.parentNode.insertBefore(e,t),e.appendChild(t),r.style.visibility="hidden",r.style.opacity="0";const a=document.createElement("span");a.className="img-loader",a.innerHTML='<div class="loader"></div>',e.appendChild(a);const c=()=>a.remove();r.addEventListener("load",c,{once:!0}),r.addEventListener("error",c,{once:!0});const l=()=>{e.classList.add("loaded"),r.style.visibility="visible",r.style.opacity="1"};r.addEventListener("load",l,{once:!0}),r.addEventListener("error",l,{once:!0}),r.complete&&r.naturalWidth&&(c(),l())}const s=new IntersectionObserver(t=>{t.forEach(r=>{if(r.isIntersecting){const e=r.target;e.dataset.src&&(e.src=e.dataset.src,e.removeAttribute("data-src"),s.unobserve(e))}})},{rootMargin:"50px 0px",threshold:.01});document.querySelectorAll("img[data-src]").forEach(t=>{s.observe(t)}),new MutationObserver(t=>{t.forEach(r=>{r.addedNodes.forEach(e=>{if(e.nodeType===1)if(e.tagName==="IMG"||e.tagName==="PICTURE"){o(e);const a=e.tagName==="IMG"?e:e.querySelector("img");a&&a.dataset.src&&s.observe(a)}else e.querySelectorAll&&e.querySelectorAll("img, picture").forEach(o),e.querySelectorAll&&e.querySelectorAll("img[data-src]").forEach(a=>{s.observe(a)})})})}).observe(document.documentElement,{childList:!0,subtree:!0}),document.querySelectorAll("img, picture").forEach(o),document.querySelectorAll("img[data-src]").forEach(t=>{s.observe(t)})})();})();
