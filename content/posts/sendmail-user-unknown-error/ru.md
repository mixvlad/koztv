---
title: "Настройка Sendmail когда MX-запись указывает на другой сервер"
slug: "nastroyka-sendmail-kogda-mx-zapis-ukazyvaet-na-drugoy-server"
date: 2016-05-21
---

Если почта вашего домена размещена на почтовом сервере в другом домене, нужно сообщить об этом sendmail. Иначе при попытке отправить письмо пользователю в вашем локальном домене вы получите ошибку от sendmail в **/var/log/mail.log**:

**_User unknown._**

Это означает, что sendmail пытается найти пользователя, указанного в сообщении, на вашем локальном сервере и не может его найти, потому что мы используем почтовый сервер, размещённый на другом IP-адресе. Чтобы решить эту проблему, нужно сообщить sendmail искать почтовых пользователей с нашим доменным именем на удалённом сервере.

Откройте **/etc/mail/sendmail.mc** для редактирования:

```bash
sudo nano /etc/mail/sendmail.mc
```

Добавьте эти две строки в конец файла:

```
define(`MAIL_HUB', `your.domain.com.')dnl
define(`LOCAL_RELAY', `your.domain.com.')dnl
```

Нажмите "**Ctrl + X**" когда закончите и ответьте "**Y**" на вопрос о сохранении файла.

Теперь нужно перезагрузить сервис sendmail:

```bash
service sendmail reload
```

И попробуйте отправить письмо снова. Если вы всё сделали правильно, письма должны проходить через удалённый почтовый сервер без ошибок.
